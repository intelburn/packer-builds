{
  "variables":
    {
    "username": "n00b",
    "userpass": "Chiapet1",
    "ExportDir": "./packer_kali"
    },
  "builders": [
    {
      "type": "virtualbox-iso",
      "cpus": 4,
      "memory": 8196,
      "disk_size": 51200,
      "guest_os_type": "Debian_64",
      "headless": false,
      "vboxmanage": [
        [ "modifyvm", "{{.Name}}", "--vram", "128" ],
        [ "modifyvm", "{{.Name}}", "--graphicscontroller", "vmsvga"],
        [ "modifyvm", "{{.Name}}", "--usbxhci", "on"]
      ],
      "iso_url": "https://cdimage.kali.org/kali-2020.1/kali-linux-2020.1-installer-amd64.iso",
      "iso_checksum": "e399fa5f4aa087218701aff513cc4cfda332e1fbd0d7c895df57c24cd5510be3",
      "iso_checksum_type": "sha256",
      "boot_wait": "5s",
      "boot_command": [
        "<down><wait100ms>",
        "<enter><wait100ms>",
        "<wait30s>",
        "<enter><wait500ms>",
        "<enter><wait500ms>",
        "<enter>",
        "<wait1m>",
        "<enter><wait500ms>",
        "<enter>",
        "<wait5s>",
        "{{ user `username` }}<wait500ms>",
        "<enter><wait500ms>",
        "<enter><wait500ms>",
        "{{ user `userpass` }}<wait500ms>",
        "<enter><wait500ms>",
        "{{ user `userpass` }}<wait500ms>",
        "<enter><wait500ms>",
        "<wait20s>",
        "<enter><wait500ms>",
        "<wait20s>",
        "<enter><wait500ms>",
        "<wait5s>",
        "<enter><wait500ms>",
        "<wait5s>",
        "<enter><wait500ms>",
        "<wait5s>",
        "<enter><wait500ms>",
        "<wait5s>",
        "<left><wait500ms>",
        "<enter>",
        "<wait5m>",
        "<enter>",
        "<wait5m>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<down><wait500ms>",
        "<spacebar><wait500ms>",
        "<enter>",
        "<wait35m>",
        "<enter>",
        "<wait30s>",
        "<enter>",
        "<wait30s>",
        "<down><wait500ms>",
        "<enter>",
        "<wait10m>",
        "<enter>"
      ],
      "ssh_username": "{{ user `username` }}",
      "ssh_password": "{{ user `userpass` }}",
      "shutdown_command": "echo '{{ user `userpass` }}' | sudo -S shutdown -h now",
      "vboxmanage_post": [
        [ "modifyvm", "{{.Name}}", "--vrde", "off"]
      ],
      "format": "ova",
      "skip_export": true,
      "keep_registered": true,
      "output_directory": "{{ user `ExportDir` }}",
      "vm_name": "packer-kali"
    }
  ]
}
